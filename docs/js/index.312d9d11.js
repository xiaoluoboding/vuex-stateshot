(function(t){function o(o){for(var n,a,u=o[0],i=o[1],d=o[2],l=0,h=[];l<u.length;l++)a=u[l],Object.prototype.hasOwnProperty.call(s,a)&&s[a]&&h.push(s[a][0]),s[a]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n]);c&&c(o);while(h.length)h.shift()();return r.push.apply(r,d||[]),e()}function e(){for(var t,o=0;o<r.length;o++){for(var e=r[o],n=!0,u=1;u<e.length;u++){var i=e[u];0!==s[i]&&(n=!1)}n&&(r.splice(o--,1),t=a(a.s=e[0]))}return t}var n={},s={index:0},r=[];function a(o){if(n[o])return n[o].exports;var e=n[o]={i:o,l:!1,exports:{}};return t[o].call(e.exports,e,e.exports,a),e.l=!0,e.exports}a.m=t,a.c=n,a.d=function(t,o,e){a.o(t,o)||Object.defineProperty(t,o,{enumerable:!0,get:e})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,o){if(1&o&&(t=a(t)),8&o)return t;if(4&o&&"object"===typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(a.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&o&&"string"!=typeof t)for(var n in t)a.d(e,n,function(o){return t[o]}.bind(null,n));return e},a.n=function(t){var o=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(o,"a",o),o},a.o=function(t,o){return Object.prototype.hasOwnProperty.call(t,o)},a.p="";var u=window["webpackJsonp"]=window["webpackJsonp"]||[],i=u.push.bind(u);u.push=o,u=u.slice();for(var d=0;d<u.length;d++)o(u[d]);var c=i;r.push([0,"chunk-vendors"]),e()})({0:function(t,o,e){t.exports=e("f161")},"04c3":function(t,o,e){"use strict";var n=e("676d"),s=e.n(n);s.a},"1dfa":function(t,o,e){"use strict";var n=e("d09d"),s=e.n(n);s.a},"676d":function(t,o,e){},ce0e:function(t,o,e){"use strict";var n=e("fc43"),s=e.n(n);s.a},d09d:function(t,o,e){},f161:function(t,o,e){"use strict";e.r(o);var n={};e.r(n),e.d(n,"setState",(function(){return k})),e.d(n,"setLayout",(function(){return G})),e.d(n,"undoLayout",(function(){return H})),e.d(n,"redoLayout",(function(){return M})),e.d(n,"resetLayout",(function(){return P}));var s=e("2b0e"),r=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{attrs:{id:"app"}},[e("GridBlock")],1)},a=[],u=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{staticClass:"grid-block"},[e("h1",[t._v("Play with the Widget ðŸ‘‡")]),e("div",{staticClass:"button-group actions"},[e("label",{attrs:{for:"actions"}},[t._v("Actions:")]),e("button",{attrs:{disabled:!t.hasUndo},on:{click:t.handleUndo}},[t._v("Undo("),e("strong",[t._v(t._s(t.undoCount))]),t._v(")(âŒ˜ + Z)")]),e("button",{attrs:{disabled:!t.hasRedo},on:{click:t.handleRedo}},[t._v("Redo("),e("strong",[t._v(t._s(t.redoCount))]),t._v(")(âŒ˜ + Y)")])]),e("div",{staticClass:"button-group mutations"},[e("label",{attrs:{for:"mutations"}},[t._v("Mutations:")]),e("button",{on:{click:t.handleChangeColor}},[t._v("Change Color")])]),e("div",{staticClass:"button-group custom"},[e("label",{attrs:{for:"mutations"}},[t._v("Custom:")]),e("button",{on:{click:t.handleChangeGrid}},[t._v("Change Grid")])]),e("div",{staticClass:"button-group restor"},[e("label",{attrs:{for:"mutations"}},[t._v("Restore:")]),e("button",{on:{click:t.handleResetGrid}},[t._v("Reset Grid")]),e("button",{on:{click:t.handleResetHistory}},[t._v("Reset History")])]),e("smart-widget-grid",{attrs:{margin:[5,5],layout:t.layout},on:{"layout-updated":t.handleLayoutUpdated}},t._l(t.layout,(function(o){return e("smart-widget",{key:o.i,attrs:{slot:o.i,simple:"",shadow:"never",padding:[0,0]},slot:o.i},[e("div",{staticClass:"layout-center",style:{"background-color":o.color}},[e("h3",[t._v(t._s(o.i))])])])})),1)],1)},i=[],d=e("4d7f"),c=e.n(d),l=e("cd3f"),h=e.n(l),y=e("f7fe"),f=e.n(y),p=e("2f62");const b=Object(p["a"])("vuexstateshot");var g={name:"GirdBlock",computed:{...Object(p["d"])({layout:t=>t.layout}),...b.mapGetters(["undoCount","redoCount","hasUndo","hasRedo"])},mounted(){this.setState({cloneLayout:h()(this.layout)}),this.bindKeys()},beforeDestroy(){this.unbindKeys()},methods:{...Object(p["c"])(["setState","setLayout","undoLayout","redoLayout","resetLayout"]),...b.mapActions(["undo","redo","reset"]),handleLayoutUpdated(t){this.setLayout(t)},async handleUndo(){const t=await this.undo();this.undoLayout(t)},async handleRedo(){const t=await this.redo();this.redoLayout(t)},handleChangeColor(){this.$store.commit("CHANGE_COLOR")},handleChangeGrid:f()((function(){const t=[{x:0,y:0,w:4,h:3,i:"One",color:"#4AF"},{x:4,y:0,w:4,h:3,i:"Two",color:"#4FA"},{x:8,y:0,w:4,h:3,i:"Three",color:"#A4F"},{x:0,y:3,w:12,h:4,i:"Four",color:"#AF4"},{x:0,y:7,w:12,h:4,i:"Five",color:"#F4A"}];this.setState({layout:t}),this.$stateshot.syncState(this.$store.state)}),333),handleResetGrid(){this.resetLayout()},handleResetHistory(){this.reset()},bindKeys(){const t=this,o=()=>{return t.handleUndo(),!1},e=()=>{return t.handleRedo(),!1};c()("âŒ˜+z, ctrl+z",o),c()("âŒ˜+y, ctrl+y",e)},unbindKeys(){c.a.unbind("âŒ˜+z, ctrl+z"),c.a.unbind("âŒ˜+y, ctrl+y")}}},v=g,m=(e("ce0e"),e("1dfa"),e("2877")),_=Object(m["a"])(v,u,i,!1,null,"73d35864",null),O=_.exports,C={name:"app",components:{GridBlock:O}},S=C,T=(e("04c3"),Object(m["a"])(S,r,a,!1,null,null,null)),L=T.exports,w=e("61e5");const A="vuexstateshot",R="__SYNC_STATE__",U="STATESHOT_UNDO",x="STATESHOT_REDO";class E{constructor(t,o){const{actions:e=[],mutations:n=[],maxLength:s=100,delay:r=50,...a}=o,u=new w["History"]({maxLength:s,delay:r,...a});this.store=t,this.actions=e,this.mutations=n,this.history=u}getHistoryLength(){return this.history.$records.filter(t=>t).length}registerPluginMoudle(){this.store.registerModule(A,{namespaced:!0,state:{prevState:{},nextState:{},hasUndo:!1,hasRedo:!1,historyLength:0,undoCount:0,redoCount:0},actions:{snapshot:async({commit:t,dispatch:o,state:e,rootState:n},s)=>{await this.history.push(n);const r=this.getHistoryLength();t(R,{hasUndo:r-1>0,hasRedo:!1,historyLength:r,undoCount:r-1,redoCount:0})},undo:({commit:t,state:o},e)=>{const{hasUndo:n}=o,s=this.history.undo().get();return s&&n&&t("STATESHOT_UNDO",s),s},redo:({commit:t,state:o},e)=>{const{hasRedo:n}=o,s=this.history.redo().get();return s&&n&&t("STATESHOT_REDO",s),s},reset:({commit:t},o)=>{this.history.reset(),t(R,{nextState:{},prevState:{},hasUndo:!1,hasRedo:!1,historyLength:0,undoCount:0,redoCount:0})}},mutations:{[R](t,o){Object.assign(t,o)},[U](t,o){t.prevState=o,t.undoCount-=1,0===t.undoCount&&(t.hasUndo=!1),t.redoCount+=1,t.hasRedo=t.redoCount>0},[x](t,o){t.nextState=o,t.redoCount-=1,0===t.redoCount&&(t.hasRedo=!1),t.undoCount+=1,t.hasUndo=t.undoCount>0}},getters:{hasUndo:t=>t.hasUndo,hasRedo:t=>t.hasRedo,undoCount:t=>t.undoCount,redoCount:t=>t.redoCount,historyLength:t=>t.historyLength}})}syncState(){this.store.dispatch(`${A}/snapshot`)}stateshotFromAction(t){return{before:(t,o)=>{},after:(t,o)=>{this.actions.includes(t.type)&&this.syncState()}}}stateshotFromMutation(t,o){this.mutations.includes(t.type)&&this.syncState()}}function F(t){return o=>{const e=new E(o,t);s["default"].prototype.$stateshot=e,e.registerPluginMoudle(),e.syncState(),o.subscribeAction(e.stateshotFromAction(o)),o.subscribe((t,o)=>e.stateshotFromMutation(t,o))}}const j=t=>{return({commit:o},...e)=>o(t,...e)},k=j("SET_STATE"),G=j("SET_LAYOUT"),H=j("UNDO_LAYOUT"),M=j("REDO_LAYOUT"),P=j("RESET_LAYOUT"),Y="SET_STATE",$="SET_LAYOUT",D="UNDO_LAYOUT",N="REDO_LAYOUT",z="CHANGE_COLOR",K="RESET_LAYOUT";s["default"].use(p["b"]);var B=new p["b"].Store({state:{layout:[{x:0,y:0,w:6,h:4,i:"One",color:"#4AF"},{x:6,y:0,w:6,h:2,i:"Two",color:"#4FA"},{x:0,y:4,w:6,h:2,i:"Three",color:"#A4F"},{x:6,y:2,w:6,h:4,i:"Four",color:"#AF4"},{x:0,y:6,w:12,h:2,i:"Five",color:"#F4A"}],cloneLayout:[]},mutations:{[Y](t,o){Object.assign(t,o)},[$](t,o){t.layout=o},[D](t,o){if(o){const{layout:e}=o;t.layout=e}},[N](t,o){if(o){const{layout:e}=o;t.layout=e}},[z](t,o){const e=([...t])=>{let o=t.length;while(o){let e=null;const n=Math.floor(Math.random()*o--);e=t[o],t[o]=t[n],t[n]=e}return t};t.layout=t.layout.map(t=>{const o=e(["F","A","4"]).join("");return{...t,color:`#${o}`}})},[K](t,o){t.layout=t.cloneLayout}},actions:n,modules:{},plugins:[F({actions:["setLayout"],mutations:["CHANGE_COLOR"]})]}),J=e("d352"),W=e.n(J);s["default"].use(W.a),s["default"].config.productionTip=!1,new s["default"]({store:B,render:t=>t(L)}).$mount("#app")},fc43:function(t,o,e){}});